<html>
<head>
 <title>linkpad 0.1</title>
  <style>
    #noteList {
      width: 500px; 
    }
    .note {
      float: left;
      background-color: #DDD;
      width: 480px;
    }
    .note .title {
      font-weight: bold;
      width: 100%;
    }
    .note .tags {
      width: 100%;
    }
  </style>
  
  <script type="text/javascript">
    // Test
    // ...
    // ...
    window.addEventListener('paste', (event) => {
      let text = (event.clipboardData || window.clipboardData).getData('text');
      addNote(text);
    });
  
    function addNote(text) {
      let nid = incrNextId();
      let div = document.createElement('div');
      div.className = 'note';
      div.innerHTML = "<div id=\"" + nid + "\" class=\"title\">" + text + "</div><div class\"tags\" contenteditable=\"true\">#test #test</div>";
      document.getElementById("noteList").appendChild(div); 
    }
    // event listener for keyup
    function checkTabPress(e) {
        "use strict";
        // pick passed event or global event object if passed one is empty
        e = e || event;
        var activeElement;
        if (e.keyCode == 9) {
            // Here read the active selected link.
            addNote('new text tab');
        }
    }
    
    function incrNextId() {
      let nid = localStorage.getItem('lastId');
      if(!nid)
        nid = 0;
      
      nid = parseInt(nid) + 1;
      localStorage.setItem('lastId', "" + nid);
      
      return nid;
    }
    
    function saveNote(id) {
      
    }

	window.addEventListener('keyup', checkTabPress);
  </script>
</head>

<body>
  <div id="noteList">&nbsp;
  </div>
  <a href="javascript:void(addNote('new note'))">Add note</a>
</body>
</html>
